(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{436:function(t,s,a){t.exports=a.p+"assets/img/client-side-render.8cdd355d.png"},437:function(t,s,a){t.exports=a.p+"assets/img/server-side-render.0ea7aea0.png"},438:function(t,s){t.exports="data:image/png;base64,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"},439:function(t,s,a){t.exports=a.p+"assets/img/2.65adb01d.png"},461:function(t,s,a){"use strict";a.r(s);var r=a(62),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"react-ssr"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-ssr"}},[t._v("#")]),t._v(" React-SSR")]),t._v(" "),r("h2",{attrs:{id:"什么是客户端渲染"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是客户端渲染"}},[t._v("#")]),t._v(" 什么是客户端渲染")]),t._v(" "),r("p",[t._v("CSR：Client Side Rendering"),r("br"),t._v("\n服务器端仅返回 JSON 数据，DATA 和 HTML 在客户端进行渲染")]),t._v(" "),r("h3",{attrs:{id:"存在的问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#存在的问题"}},[t._v("#")]),t._v(" 存在的问题")]),t._v(" "),r("ul",[r("li",[t._v("首屏等待时间长, 用户体验差")]),t._v(" "),r("li",[t._v("页面结构为空, 不利于 SEO")])]),t._v(" "),r("p",[t._v("SPA 应用中服务器端渲染解决的问题"),r("br"),t._v(" "),r("img",{attrs:{src:a(436),alt:""}})]),t._v(" "),r("h2",{attrs:{id:"什么是服务器端渲染"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是服务器端渲染"}},[t._v("#")]),t._v(" 什么是服务器端渲染")]),t._v(" "),r("p",[t._v("SSR：Server Side Rendering"),r("br"),t._v("\n服务器端返回 HTML，DATA 和 HTML 在服务器端进行渲染")]),t._v(" "),r("p",[t._v("SPA 应用中服务器端渲染解决的问题"),r("br"),t._v(" "),r("img",{attrs:{src:a(437),alt:""}})]),t._v(" "),r("h2",{attrs:{id:"react-ssr-同构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-ssr-同构"}},[t._v("#")]),t._v(" React SSR 同构")]),t._v(" "),r("p",[t._v("同构指的是代码复用，即实现客户端和服务端最大程度的代码复用")]),t._v(" "),r("h3",{attrs:{id:"快速搭建ssr项目"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#快速搭建ssr项目"}},[t._v("#")]),t._v(" 快速搭建ssr项目")]),t._v(" "),r("p",[t._v("先创建一个新项目，目录结构如下")]),t._v(" "),r("p",[r("img",{attrs:{src:a(438),alt:"项目结构"}}),r("br"),t._v("\npackage.json 代码如下")]),t._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"keywords"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"license"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@babel/cli"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.10.3"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@babel/core"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.10.3"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@babel/polyfill"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.10.4"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@babel/preset-env"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.10.3"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@babel/preset-react"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.10.1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"axios"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^0.19.2"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"babel-loader"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^8.1.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"express"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.17.1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nodemon"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.0.4"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npm-run-all"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.1.5"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^16.13.1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-dom"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^16.13.1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-helmet"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.1.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-redux"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^7.2.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-router-config"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.1.1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-router-dom"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.2.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"redux"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.0.5"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"redux-thunk"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.3.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serialize-javascript"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.0.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.43.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack-cli"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.3.12"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack-dev-server"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.11.0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack-merge"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.2.2"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webpack-node-externals"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.7.2"')]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("h3",{attrs:{id:"创建-node-服务器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建-node-服务器"}},[t._v("#")]),t._v(" 创建 Node 服务器")]),t._v(" "),r("p",[r("code",[t._v("./server/http.js")])]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" express "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"express"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"server is listening on 3000 port"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" app"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),r("p",[r("code",[t._v("./server/index.js")])]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" app "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./http"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("h3",{attrs:{id:"实现react-ssr"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现react-ssr"}},[t._v("#")]),t._v(" 实现React SSR")]),t._v(" "),r("ol",[r("li",[t._v("引入要渲染的 React 组件")]),t._v(" "),r("li",[t._v("通过 renderToString 方法将 React 组件转换为 HTML 字符串")]),t._v(" "),r("li",[t._v("将结果HTML字符串想到到客户端")])]),t._v(" "),r("blockquote",[r("p",[t._v("renderToString 方法用于将 React 组件转换为 HTML 字符串, 通过 react-dom/server 导入")])]),t._v(" "),r("p",[t._v("对于 React 组件来说，是客户端和服务端通用的，所以可以放在share目录下")]),t._v(" "),r("p",[r("code",[t._v("./share/pages/Home.jsx")])]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("Home")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Home Pages"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Home"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),r("p",[t._v("配置路由，返回 Home 组件")]),t._v(" "),r("p",[r("code",[t._v("./server/inde.js")])]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" app "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./http"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因为下面 <Home /> 为jsx语法 需要导入 React")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Home "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../share/pages/Home'")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" renderToString "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom/server'")]),t._v("\n\napp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderToString")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Home "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n    <html>\n      <head>\n        <title>React SSR</title>\n      </head>\n      <body>\n        <div id="root">')]),r("span",{pre:!0,attrs:{class:"token interpolation"}},[r("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("content"),r("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("</div>\n      </body>\n    </html>\n  ")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("h3",{attrs:{id:"webpack-打包配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#webpack-打包配置"}},[t._v("#")]),t._v(" webpack 打包配置")]),t._v(" "),r("p",[t._v("完成到上步截止，代码似乎看上去没什么问题，但是是运行不起来的，原因是：")]),t._v(" "),r("ul",[r("li",[t._v("Node 环境不支持 ESModule")]),t._v(" "),r("li",[t._v("Node 环境不支持 JSX 语法")])]),t._v(" "),r("p",[t._v("所以需要借助 webpack 调用 babel 对文件进行打包，然后运行打包之后的文件")]),t._v(" "),r("p",[r("code",[t._v("./webpack.server.js")])]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/server/index.js'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token regex"}},[r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("exclude")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token regex"}},[r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @babel/preset-env 转换高级的 js 语法")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @babel/preset-react 转换 jsx 语法")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-react"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("然后配置 script 脚本")]),t._v(" "),r("p",[r("code",[t._v("./package.json")])]),t._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev:server-build"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config webpack.server.js"')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),r("p",[t._v("然后在终端执行执行 "),r("code",[t._v("npm run dev:server-build")]),t._v(" 命令")]),t._v(" "),r("p",[t._v("打包之后会在根目录生成 build 文件，里面会有 bundle.js，然后用 node直接运行")]),t._v(" "),r("p",[r("img",{attrs:{src:a(439),alt:""}})]),t._v(" "),r("p",[t._v("现在可以看到服务启动后访问网址返回刚刚的 Home 组件所写内容")]),t._v(" "),r("h3",{attrs:{id:"项目启动命令配置优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#项目启动命令配置优化"}},[t._v("#")]),t._v(" 项目启动命令配置优化")]),t._v(" "),r("p",[t._v("每次修改上述代码后都要重新打包运行比较繁琐，所以监控文件变化，自动打包就尤为重要")]),t._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev:server-run"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodemon --watch build --exec \\"node build/bundle.js\\""')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev:server-build"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config webpack.server.js --watch"')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),r("SideTitle",{attrs:{page:t.$page}})],1)}),[],!1,null,null,null);s.default=n.exports}}]);